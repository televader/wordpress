(()=>{var e={517:(e,t,n)=>{"use strict";var s=n(574);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,r){if(r!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},406:(e,t,n)=>{e.exports=n(517)()},574:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},184:(e,t)=>{var n;!function(){"use strict";var s={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var r=o.apply(null,n);r&&e.push(r)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var a in n)s.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,s=window.wp.components,o=window.wp.url;var i=n(184),r=n.n(i);const a=window.lodash;var l=n(406),c=n.n(l);const d=window.wp.compose,p=window.wp.keycodes;class h extends e.Component{constructor(){super(...arguments),this.handleKeyDown=this.handleKeyDown.bind(this),this.select=this.select.bind(this),this.optionRefs={},this.listbox=(0,e.createRef)()}componentDidUpdate(e){const{options:t,selectedIndex:n}=this.props;(0,a.isEqual)(t,e.options)||(this.optionRefs={}),n!==e.selectedIndex&&this.scrollToOption(n)}getOptionRef(t){return this.optionRefs.hasOwnProperty(t)||(this.optionRefs[t]=(0,e.createRef)()),this.optionRefs[t]}select(e){const{onSelect:t}=this.props;e.isDisabled||t(e)}scrollToOption(e){const t=this.listbox.current;if(t.scrollHeight<=t.clientHeight)return;if(!this.optionRefs[e])return;const n=this.optionRefs[e].current,s=t.clientHeight+t.scrollTop,o=n.offsetTop+n.offsetHeight;o>s?t.scrollTop=o-t.clientHeight:n.offsetTop<t.scrollTop&&(t.scrollTop=n.offsetTop)}handleKeyDown(e){const{decrementSelectedIndex:t,incrementSelectedIndex:n,options:s,onSearch:o,selectedIndex:i,setExpanded:r}=this.props;if(0!==s.length)switch(e.keyCode){case p.UP:t(),e.preventDefault(),e.stopPropagation();break;case p.DOWN:n(),e.preventDefault(),e.stopPropagation();break;case p.ENTER:s[i]&&this.select(s[i]),e.preventDefault(),e.stopPropagation();break;case p.LEFT:case p.RIGHT:r(!1);break;case p.ESCAPE:return r(!1),void o(null);case p.TAB:s[i]&&this.select(s[i]),r(!1)}}toggleKeyEvents(e){const{node:t}=this.props;t[e?"addEventListener":"removeEventListener"]("keydown",this.handleKeyDown,!0)}componentDidMount(){const{selectedIndex:e}=this.props;e>-1&&this.scrollToOption(e),this.toggleKeyEvents(!0)}componentWillUnmount(){this.toggleKeyEvents(!1)}render(){const{instanceId:t,listboxId:n,options:o,selectedIndex:i,staticList:a}=this.props,l=r()("woocommerce-select-control__listbox",{"is-static":a});return(0,e.createElement)("div",{ref:this.listbox,id:n,role:"listbox",className:l,tabIndex:"-1"},o.map(((n,o)=>(0,e.createElement)(s.Button,{ref:this.getOptionRef(o),key:n.key,id:`woocommerce-select-control__option-${t}-${n.key}`,role:"option","aria-selected":o===i,disabled:n.isDisabled,className:r()("woocommerce-select-control__option",{"is-selected":o===i}),onClick:()=>this.select(n),tabIndex:"-1"},n.label))))}}h.propTypes={instanceId:c().number,listboxId:c().string,node:c().instanceOf(Element).isRequired,onSelect:c().func,options:c().arrayOf(c().shape({isDisabled:c().bool,key:c().oneOfType([c().number,c().string]).isRequired,keywords:c().arrayOf(c().oneOfType([c().string,c().number])),label:c().oneOfType([c().string,c().object]),value:c().any})).isRequired,selectedIndex:c().number,staticList:c().bool};const u=h;function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}const f=function(t){var n=t.icon,s=t.size,o=void 0===s?24:s,i=function(e,t){if(null==e)return{};var n,s,o=function(e,t){if(null==e)return{};var n,s,o={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,["icon","size"]);return(0,e.cloneElement)(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:o,height:o},i))},b=window.wp.primitives,y=(0,e.createElement)(b.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(b.Path,{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM15.5303 8.46967C15.8232 8.76256 15.8232 9.23744 15.5303 9.53033L13.0607 12L15.5303 14.4697C15.8232 14.7626 15.8232 15.2374 15.5303 15.5303C15.2374 15.8232 14.7626 15.8232 14.4697 15.5303L12 13.0607L9.53033 15.5303C9.23744 15.8232 8.76256 15.8232 8.46967 15.5303C8.17678 15.2374 8.17678 14.7626 8.46967 14.4697L10.9393 12L8.46967 9.53033C8.17678 9.23744 8.17678 8.76256 8.46967 8.46967C8.76256 8.17678 9.23744 8.17678 9.53033 8.46967L12 10.9393L14.4697 8.46967C14.7626 8.17678 15.2374 8.17678 15.5303 8.46967Z"})),v=window.wp.htmlEntities,w=({id:n,instanceId:o,isVisible:i,label:a,popoverContents:l,remove:c,screenReaderLabel:d,setState:p,className:h})=>{if(d=d||a,!a)return null;a=(0,v.decodeEntities)(a);const u=r()("woocommerce-tag",h,{"has-remove":!!c}),m=`woocommerce-tag__label-${o}`,g=(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",{className:"screen-reader-text"},d),(0,e.createElement)("span",{"aria-hidden":"true"},a));return(0,e.createElement)("span",{className:u},l?(0,e.createElement)(s.Button,{className:"woocommerce-tag__text",id:m,onClick:()=>p((()=>({isVisible:!0})))},g):(0,e.createElement)("span",{className:"woocommerce-tag__text",id:m},g),l&&i&&(0,e.createElement)(s.Popover,{onClose:()=>p((()=>({isVisible:!1})))},l),c&&(0,e.createElement)(s.Button,{className:"woocommerce-tag__remove",onClick:c(n),label:(0,t.sprintf)((0,t.__)("Remove %s","woocommerce-admin"),a),"aria-describedby":m},(0,e.createElement)(f,{icon:y,size:20,className:"clear-icon"})))};w.propTypes={id:c().oneOfType([c().number,c().string]),label:c().string.isRequired,popoverContents:c().node,remove:c().func,screenReaderLabel:c().string};const _=(0,d.withState)({isVisible:!1})((0,d.withInstanceId)(w));class S extends e.Component{constructor(e){super(e),this.removeAll=this.removeAll.bind(this),this.removeResult=this.removeResult.bind(this)}removeAll(){const{onChange:e}=this.props;e([])}removeResult(e){return()=>{const{selected:t,onChange:n}=this.props,s=(0,a.findIndex)(t,{key:e});n([...t.slice(0,s),...t.slice(s+1)])}}render(){const{selected:n,showClearButton:o}=this.props;return n.length?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"woocommerce-select-control__tags"},n.map(((s,o)=>{if(!s.label)return null;const i=(0,t.sprintf)((0,t.__)("%1$s (%2$s of %3$s)","woocommerce-admin"),s.label,o+1,n.length);return(0,e.createElement)(_,{key:s.key,id:s.key,label:s.label,remove:this.removeResult,screenReaderLabel:i})}))),o&&(0,e.createElement)(s.Button,{className:"woocommerce-select-control__clear",isLink:!0,onClick:this.removeAll},(0,e.createElement)(f,{icon:y,className:"clear-icon"}),(0,e.createElement)("span",{className:"screen-reader-text"},(0,t.__)("Clear all","woocommerce-admin")))):null}}S.propTypes={onChange:c().func,onSelect:c().func,selected:c().arrayOf(c().shape({key:c().oneOfType([c().number,c().string]).isRequired,label:c().string})),showClearButton:c().bool};const E=S,O=(0,e.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(b.Path,{d:"M13.5 6C10.5 6 8 8.5 8 11.5c0 1.1.3 2.1.9 3l-3.4 3 1 1.1 3.4-2.9c1 .9 2.2 1.4 3.6 1.4 3 0 5.5-2.5 5.5-5.5C19 8.5 16.5 6 13.5 6zm0 9.5c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z"}));class x extends e.Component{constructor(t){super(t),this.state={isActive:!1},this.input=(0,e.createRef)(),this.updateSearch=this.updateSearch.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}updateSearch(e){return t=>{e(t.target.value)}}onFocus(e){const{isSearchable:t,setExpanded:n,showAllOnFocus:s,updateSearchOptions:o}=this.props;return i=>{this.setState({isActive:!0}),t&&s?(i.target.select(),o("")):t?e(i.target.value):n(!0)}}onBlur(){const{onBlur:e}=this.props;"function"==typeof e&&e(),this.setState({isActive:!1})}onKeyDown(e){const{decrementSelectedIndex:t,incrementSelectedIndex:n,selected:s,onChange:o,query:i,setExpanded:r}=this.props;p.BACKSPACE===e.keyCode&&!i&&s.length&&o([...s.slice(0,-1)]),p.DOWN===e.keyCode&&(n(),r(!0),e.preventDefault(),e.stopPropagation()),p.UP===e.keyCode&&(t(),r(!0),e.preventDefault(),e.stopPropagation())}renderButton(){const{multiple:t,selected:n}=this.props;return t||!n.length?null:(0,e.createElement)("div",{className:"woocommerce-select-control__control-value"},n[0].label)}renderInput(){const{activeId:t,disabled:n,hasTags:s,inlineTags:o,instanceId:i,isExpanded:r,isSearchable:a,listboxId:l,onSearch:c,placeholder:d,searchInputType:p,autoComplete:h}=this.props,{isActive:u}=this.state;return(0,e.createElement)("input",{autoComplete:h||"off",className:"woocommerce-select-control__control-input",id:`woocommerce-select-control-${i}__control-input`,ref:this.input,type:a?p:"button",value:this.getInputValue(),placeholder:u?d:"",onChange:this.updateSearch(c),onFocus:this.onFocus(c),onBlur:this.onBlur,onKeyDown:this.onKeyDown,role:"combobox","aria-autocomplete":"list","aria-expanded":r,"aria-haspopup":"true","aria-owns":l,"aria-controls":l,"aria-activedescendant":t,"aria-describedby":s&&o?`search-inline-input-${i}`:null,disabled:n})}getInputValue(){const{inlineTags:e,isFocused:t,isSearchable:n,multiple:s,query:o,selected:i}=this.props,r=i.length?i[0].label:"";return s||t||e?n&&t&&o?o:"":r}render(){const{className:n,disabled:s,hasTags:o,help:i,inlineTags:a,instanceId:l,isSearchable:c,label:d,query:p}=this.props,{isActive:h}=this.state;return(0,e.createElement)("div",{className:r()("components-base-control","woocommerce-select-control__control",n,{empty:!p||0===p.length,"is-active":h,"has-tags":a&&o,"with-value":this.getInputValue().length,"has-error":!!i,"is-disabled":s}),onClick:e=>{"components-base-control__help"!==e.target.className&&this.input.current.focus()}},c&&(0,e.createElement)(f,{className:"woocommerce-select-control__control-icon",icon:O}),a&&(0,e.createElement)(E,Object.assign({},this.props)),(0,e.createElement)("div",{className:"components-base-control__field"},!!d&&(0,e.createElement)("label",{htmlFor:`woocommerce-select-control-${l}__control-input`,className:"components-base-control__label"},d),this.renderInput(),a&&(0,e.createElement)("span",{id:`search-inline-input-${l}`,className:"screen-reader-text"},(0,t.__)("Move backward for selected items","woocommerce-admin")),!!i&&(0,e.createElement)("p",{id:`woocommerce-select-control-${l}__help`,className:"components-base-control__help"},i)))}}x.propTypes={hasTags:c().bool,help:c().oneOfType([c().string,c().node]),inlineTags:c().bool,isSearchable:c().bool,instanceId:c().number,label:c().string,listboxId:c().string,onBlur:c().func,onChange:c().func,onSearch:c().func,placeholder:c().string,query:c().string,selected:c().arrayOf(c().shape({key:c().oneOfType([c().number,c().string]).isRequired,label:c().string})),showAllOnFocus:c().bool,autoComplete:c().string};const k=x,C={isExpanded:!1,isFocused:!1,query:""};class I extends e.Component{constructor(e){super(e);const{selected:t,options:n,excludeSelectedOptions:s}=e;this.state={...C,searchOptions:[],selectedIndex:t&&(null==n?void 0:n.length)&&!s?n.findIndex((e=>e.key===t)):null},this.bindNode=this.bindNode.bind(this),this.decrementSelectedIndex=this.decrementSelectedIndex.bind(this),this.incrementSelectedIndex=this.incrementSelectedIndex.bind(this),this.onAutofillChange=this.onAutofillChange.bind(this),this.updateSearchOptions=(0,a.debounce)(this.updateSearchOptions.bind(this),e.searchDebounceTime),this.search=this.search.bind(this),this.selectOption=this.selectOption.bind(this),this.setExpanded=this.setExpanded.bind(this),this.setNewValue=this.setNewValue.bind(this)}bindNode(e){this.node=e}reset(e=this.getSelected()){const{multiple:t,excludeSelectedOptions:n}=this.props,s={...C};!t&&e.length&&e[0].key&&(s.selectedIndex=n?null:this.props.options.findIndex((t=>t.key===e[0].key))),this.setState(s)}handleFocusOutside(){this.reset()}hasMultiple(){const{multiple:e,selected:t}=this.props;return!!e&&(Array.isArray(t)?t.some((e=>Boolean(e.label))):Boolean(t))}getSelected(){const{multiple:e,options:t,selected:n}=this.props;if(e||Array.isArray(n))return n;const s=t.find((e=>e.key===n));return s?[s]:[]}selectOption(e){const{multiple:t,selected:n}=this.props,s=t?[...n,e]:[e];this.reset(s),-1===(Array.isArray(n)?n:[{key:n}]).findIndex((t=>t.key===e.key))&&this.setNewValue(s);const o=this.props.excludeSelectedOptions?null:this.getOptions().findIndex((t=>t.key===e.key));this.setState({selectedIndex:o})}setNewValue(e){const{onChange:t,selected:n,multiple:s}=this.props,{query:o}=this.state;s||Array.isArray(n)?t(e,o):t(e.length>0?e[0].key:"",o)}decrementSelectedIndex(){const{selectedIndex:e}=this.state,t=this.getOptions(),n=null!==e?(0===e?t.length:e)-1:t.length-1;this.setState({selectedIndex:n})}incrementSelectedIndex(){const{selectedIndex:e}=this.state,t=this.getOptions(),n=null!==e?(e+1)%t.length:0;this.setState({selectedIndex:n})}announce(e){const{debouncedSpeak:n}=this.props;n&&(e.length?n((0,t.sprintf)((0,t._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"woocommerce-admin"),e.length),"assertive"):n((0,t.__)("No results.","woocommerce-admin"),"assertive"))}getOptions(){const{isSearchable:e,options:t,excludeSelectedOptions:n}=this.props,{searchOptions:s}=this.state,o=this.getSelected().map((e=>e.key)),i=e?s:t;return n?i.filter((e=>!o.includes(e.key))):i}getOptionsByQuery(e,t){const{getSearchExpression:n,maxResults:s,onFilter:o}=this.props,i=[],r=n((0,a.escapeRegExp)(t?t.trim():"")),l=r?new RegExp(r,"i"):/^$/;for(let t=0;t<e.length;t++){const n=e[t];let{keywords:o=[]}=n;if("string"==typeof n.label&&(o=[...o,n.label]),o.some((e=>l.test(e)))&&(i.push(n),s&&i.length===s))break}return o(i,t)}setExpanded(e){this.setState({isExpanded:e})}search(e){const t=this.cacheSearchOptions||[],n=null===e||e.length||this.props.hideBeforeSearch?this.getOptionsByQuery(t,e):t;this.setState({query:e,isFocused:!0,searchOptions:n,selectedIndex:(null==e?void 0:e.length)>0?null:this.state.selectedIndex},(()=>{this.setState({isExpanded:Boolean(this.getOptions().length)})})),this.updateSearchOptions(e)}updateSearchOptions(e){const{hideBeforeSearch:t,options:n,onSearch:s}=this.props,o=this.activePromise=Promise.resolve(s(n,e)).then((n=>{if(o!==this.activePromise)return;this.cacheSearchOptions=n;const s=null===e||e.length||t?this.getOptionsByQuery(n,e):n;this.setState({searchOptions:s,selectedIndex:(null==e?void 0:e.length)>0?null:this.state.selectedIndex},(()=>{this.setState({isExpanded:Boolean(this.getOptions().length)}),this.announce(s)}))}))}onAutofillChange(e){const{options:t}=this.props,n=this.getOptionsByQuery(t,e.target.value);1===n.length&&this.selectOption(n[0])}render(){const{autofill:t,children:n,className:s,disabled:o,controlClassName:i,inlineTags:a,instanceId:l,isSearchable:c,options:d}=this.props,{isExpanded:p,isFocused:h,selectedIndex:m}=this.state,g=this.hasMultiple(),{key:f=""}=d[m]||{},b=p?`woocommerce-select-control__listbox-${l}`:null,y=p?`woocommerce-select-control__option-${l}-${f}`:null;return(0,e.createElement)("div",{className:r()("woocommerce-select-control",s,{"has-inline-tags":g&&a,"is-focused":h,"is-searchable":c}),ref:this.bindNode},t&&(0,e.createElement)("input",{onChange:this.onAutofillChange,name:t,type:"text",className:"woocommerce-select-control__autofill-input",tabIndex:"-1"}),n,(0,e.createElement)(k,Object.assign({},this.props,this.state,{activeId:y,className:i,disabled:o,hasTags:g,isExpanded:p,listboxId:b,onSearch:this.search,selected:this.getSelected(),onChange:this.setNewValue,setExpanded:this.setExpanded,updateSearchOptions:this.updateSearchOptions,decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex})),!a&&g&&(0,e.createElement)(E,Object.assign({},this.props,{selected:this.getSelected()})),p&&(0,e.createElement)(u,Object.assign({},this.props,this.state,{activeId:y,listboxId:b,node:this.node,onSelect:this.selectOption,onSearch:this.search,options:this.getOptions(),decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,setExpanded:this.setExpanded})))}}I.propTypes={autofill:c().string,children:c().node,className:c().string,controlClassName:c().string,disabled:c().bool,excludeSelectedOptions:c().bool,onFilter:c().func,getSearchExpression:c().func,help:c().oneOfType([c().string,c().node]),inlineTags:c().bool,isSearchable:c().bool,label:c().string,onChange:c().func,onSearch:c().func,options:c().arrayOf(c().shape({isDisabled:c().bool,key:c().oneOfType([c().number,c().string]).isRequired,keywords:c().arrayOf(c().oneOfType([c().string,c().number])),label:c().oneOfType([c().string,c().object]),value:c().any})).isRequired,placeholder:c().string,searchDebounceTime:c().number,selected:c().oneOfType([c().string,c().arrayOf(c().shape({key:c().oneOfType([c().number,c().string]).isRequired,label:c().string}))]),maxResults:c().number,multiple:c().bool,showClearButton:c().bool,searchInputType:c().oneOf(["text","search","number","email","tel","url"]),hideBeforeSearch:c().bool,showAllOnFocus:c().bool,staticList:c().bool,autoComplete:c().string},I.defaultProps={autofill:null,excludeSelectedOptions:!0,getSearchExpression:a.identity,inlineTags:!1,isSearchable:!1,onChange:a.noop,onFilter:a.identity,onSearch:e=>Promise.resolve(e),maxResults:0,multiple:!1,searchDebounceTime:0,searchInputType:"search",selected:[],showAllOnFocus:!1,showClearButton:!1,hideBeforeSearch:!1,staticList:!1,autoComplete:"off"};const T=(0,d.compose)([s.withSpokenMessages,d.withInstanceId,s.withFocusOutside])(I),N=window.wp.apiFetch;var P=n.n(N);const R="undefined"!=typeof thimEKit?thimEKit.types:[];R.unshift({value:"",label:(0,t.__)("Default","thim-elementor-kit")});const A="undefined"!=typeof thimEKit?thimEKit.conditions:[],B="undefined"!=typeof thimEKit?thimEKit.condition.post_type:[];function D(n){let{open:i,setOpen:r,modalType:a,postID:l,templateType:c}=n;const[d,p]=(0,e.useState)(""),[h,u]=(0,e.useState)(""),[m,g]=(0,e.useState)([]),[f,b]=(0,e.useState)([]),[y,v]=(0,e.useState)([]),[w,_]=(0,e.useState)([]),[S,E]=(0,e.useState)(!1),[O,x]=(0,e.useState)([]),[k,C]=(0,e.useState)([]),[I,N]=(0,e.useState)(!1),[D,L]=(0,e.useState)(!1),[j,F]=(0,e.useState)(!0),[q,K]=(0,e.useState)({status:"",message:""});function V(){const e=m.map((e=>e.value)),t={};if(("header"===d||"footer"===d||"edit_header_footer"===a)&&e)if(e.includes("entire"))t.entire=!0;else{if(e.includes("archive")){t.archive=!0;const e=f.map((e=>e.value));t.archiveList=e.length>0?e:[]}if(e.includes("singular")){t.singular=!0;const e=y.map((e=>e.value));t.singularList=e.length>0?e:[]}if(e.includes("page")){t.page=!0;const e=w.map((e=>e.value));t.pageList=e.length>0?e:[]}e.includes("404")&&(t[404]=!0),e.includes("realpress-agent")&&(t["realpress-agent"]=!0)}return t}return(0,e.useEffect)((()=>{!async function(){N(!0);try{const e=(await P()({method:"GET",path:(0,o.addQueryArgs)("wp/v2/pages",{per_page:100})})).map((e=>({key:e.slug,value:e.slug,label:e.title.rendered||"No title"})));e&&x(e)}catch(e){}N(!1)}(),function(){const e=new URL(location.href).searchParams.get("thim_elementor_type");e&&p(e)}()}),[]),(0,e.useEffect)((()=>{!async function(){if("edit_header_footer"===a&&l)try{const e=await P()({method:"GET",path:(0,o.addQueryArgs)("thim-ekit/get-template",{id:l,nocache:Date.now(),templateType:c})});if("success"===e.status){u(e?.data?.title||""),E(e?.data?.sticky||!1);const t=e?.data?.conditions,n=[];if(t&&t?.entire){const e=A.find((e=>"entire"===e.value));e&&n.push(e)}else{if(t&&t?.archive){const e=A.find((e=>"archive"===e.value));e&&n.push(e)}if(t&&t?.singular){const e=A.find((e=>"singular"===e.value));e&&n.push(e)}if(t&&t?.page){const e=A.find((e=>"page"===e.value));e&&n.push(e)}if(t&&t?.[404]){const e=A.find((e=>"404"===e.value));e&&n.push(e)}if(t&&t?.["realpress-agent"]){const e=A.find((e=>"realpress-agent"===e.value));e&&n.push(e)}if(t&&t?.archive&&t?.archiveList){const e=[];t.archiveList.map((t=>{const n=B.find((e=>e.value===t));return n&&e.push(n)})),b(e)}if(t&&t?.singular&&t?.singularList){const e=[];t.singularList.map((t=>{const n=B.find((e=>e.value===t));return n&&e.push(n)})),v(e)}t&&t?.page&&t?.pageList&&C(t.pageList)}g(n)}F(!1)}catch(e){K({status:"error",message:e.message||""}),F(!1)}}()}),[]),(0,e.useEffect)((()=>{if(k.length>0&&O.length>0){const e=[];k.map((t=>{const n=O&&O.find((e=>e.value===t));return n&&e.push(n)})),_(e)}}),[k,O]),(0,e.createElement)(s.Modal,{className:"thim-ekit__modal",focusOnMount:!0,shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!0,title:"edit_header_footer"===a?(0,t.__)("Edit template","thim-elementor-kit"):(0,t.__)("Add new template","thim-elementor-kit"),onRequestClose:()=>r(!1)},j&&"edit_header_footer"===a?(0,e.createElement)(s.Spinner,null):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("form",{onSubmit:e=>{e.preventDefault(),"edit_header_footer"===a?async function(){L(!0);try{const e=await P()({path:"thim-ekit/update-template",method:"POST",data:{id:l,name:h,condition:V(),templateType:c,sticky:S}});K({status:e.status,message:e.message||""}),L(!1),e?.data?.redirect&&(window.location.href=e.data.redirect)}catch(e){K({status:"error",message:e.message||""}),L(!1)}}():async function(){L(!0);try{const e=V(),t=await P()({path:"thim-ekit/create-template",method:"POST",data:{name:h,type:d,condition:e,sticky:S}});K({status:t.status,message:t.message||""}),L(!1),t?.data?.redirect&&(window.location.href=t.data.redirect)}catch(e){K({status:"error",message:e.message||""}),L(!1)}}()}},!a&&(0,e.createElement)(s.SelectControl,{label:(0,t.__)("Select the type","thim-elementor-kit"),value:d,onChange:e=>p(e),options:R}),(0,e.createElement)(s.TextControl,{label:(0,t.__)("Template name","thim-elementor-kit"),placeholder:(0,t.__)("Enter template name…","thim-elementor-kit"),value:h,onChange:e=>u(e)}),"header"===d&&(0,e.createElement)(s.CheckboxControl,{label:(0,t.__)("Enable sticky","thim-elementor-kit"),checked:S,onChange:E}),("header"===d||"footer"===d||"edit_header_footer"===a)&&(0,e.createElement)(T,{label:(0,t.__)("Select Conditions","thim-elementor-kit"),selected:m,multiple:!0,onChange:e=>g(e),options:A}),m.find((e=>"archive"===e.value))&&(0,e.createElement)(T,{label:(0,t.__)("Select Archive Post Type","thim-elementor-kit"),selected:f,multiple:!0,onChange:e=>b(e),options:B}),m.find((e=>"singular"===e.value))&&(0,e.createElement)(T,{label:(0,t.__)("Select Singular Post Type","thim-elementor-kit"),selected:y,multiple:!0,onChange:e=>v(e),options:B}),m.find((e=>"page"===e.value))&&(0,e.createElement)(e.Fragment,null,I&&(0,e.createElement)("div",null,(0,e.createElement)(s.Spinner,null)),O.length>0&&(0,e.createElement)(T,{label:(0,t.__)("Select Page","thim-elementor-kit"),selected:w,multiple:!0,options:O,onChange:e=>_(e),placeholder:(0,t.__)("Start typing to search page…","thim-elementor-kit"),help:"Empty to select all pages",__experimentalExpandOnFocus:!0,isSearchable:!0,hideBeforeSearch:!0})),(0,e.createElement)(s.Button,{isPrimary:!0,variant:"primary",type:"submit",style:{marginTop:10},icon:D?(0,e.createElement)(s.Spinner,null):""},"edit_header_footer"===a?(0,t.__)("Update template","thim-elementor-kit"):(0,t.__)("Create template","thim-elementor-kit"))),q.status&&(0,e.createElement)(s.Notice,{status:q.status,isDismissible:!1},(0,e.createElement)("p",null,q?.message||(0,t.__)("No data available","thim-elementor-kit")))))}const L=new URL(location.href),j=L.searchParams.get("thim_post_id"),F=L.searchParams.get("thim_elementor_type");wp.element.render((0,e.createElement)((function(){const[n,o]=(0,e.useState)(!1),[i,r]=(0,e.useState)("");return(0,e.useEffect)((()=>{const e=document.querySelector(".page-title-action"),t=document.querySelector(".wp-heading-inline");function n(){"#add_new"===location.hash&&(o(!0),location.hash=""),"#edit_header_footer"===location.hash&&(r("edit_header_footer"),o(!0),location.hash="")}return e&&e.remove(),t&&t.remove(),n(),window.addEventListener("hashchange",(()=>{n()}),!1),()=>{window.removeEventListener("hashchange",(()=>{n()}),!1)}}),[]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"thim-ekit"},(0,e.createElement)("div",{className:"thim-ekit__inner"},(0,e.createElement)("h1",{className:"thim-ekit__heading"},(0,t.__)("Thim Elementor Templates","thim-elementor-kit")),(0,e.createElement)(s.Button,{isPrimary:!0,variant:"primary",onClick:()=>{r(""),o(!n)}},(0,t.__)("Add new","thim-elementor-kit"))),(0,e.createElement)("div",null,(0,e.createElement)("a",{href:"https://thimpress.com/contact-us/",className:"thim-ekit__contact"},(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},(0,e.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),(0,t.__)("Contact us","thim-elementor-kit")))),n&&(0,e.createElement)(D,{open:n,setOpen:o,modalType:i,postID:j||"",templateType:F||""}))}),null),document.getElementById("thim-elementor-header"))})()})();