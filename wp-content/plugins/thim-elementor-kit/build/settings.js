(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.wp.i18n,i=window.wp.components,s=window.wp.apiFetch;var a=e.n(s);const l=window.wp.primitives,m=(0,t.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(l.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"}));function d(e){let{widgets:s,setWidgets:l,widgetSettings:m,setWidgetSettings:d,widgetList:c,setWidgetList:o,loaded:_,setLoaded:r}=e;const[g,h]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{_.widgets||async function(){h(!0);const e=await a()({path:"thim-ekit/get-widget-settings",method:"GET"});r({..._,widgets:!0}),l(e?.widgets||[]),d(e?.settings||[]),o(e?.widget_list||[]),h(!1)}()}),[]),(0,t.createElement)("div",{className:"thim-ekit-settings__widgets"},g?(0,t.createElement)(i.Spinner,null):(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__header"},(0,t.createElement)(i.ToggleControl,{label:(0,n.__)("Disable/Enable All Widgets","thim-elementor-kit"),checked:m.length!==c.length,onChange:()=>{m.length===c.length?d([]):d(c)}})),(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content"},s.length>0&&s.map((e=>(0,t.createElement)("div",{key:e.id,className:"thim-ekit-settings__widgets__content__modules"},(0,t.createElement)("h3",null,e.title),(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content__widgets"},e?.items&&e.items.map((e=>(0,t.createElement)("div",{key:e.id,className:"thim-ekit-settings__widgets__content__widget"},(0,t.createElement)(i.ToggleControl,{label:e?.name,checked:0===m.length||!m.includes(e.id),onChange:()=>function(e){const t=[...m];if(t.includes(e)){const n=t.indexOf(e);n>-1&&t.splice(n,1)}else t.push(e);d(t)}(e.id)})))))))))))}function c(e){let{moduleSettings:s,setModuleSettings:l,loaded:m,setLoaded:d}=e;const[c,o]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{m.modules||async function(){o(!0);const e=await a()({path:"wp/v2/settings",method:"GET"});d({...m,modules:!0}),l(e?.thim_ekits_module_settings||{}),o(!1)}()}),[]),(0,t.createElement)("div",{className:"thim-ekit-settings__widgets"},c?(0,t.createElement)(i.Spinner,null):(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__header"}),(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content"},(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content__modules"},(0,t.createElement)("h3",null,(0,n.__)("Mega menu","thim-elementor-kit")),(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content__body"},(0,t.createElement)(i.ToggleControl,{label:(0,n.__)("Mega menu","thim-elementor-kit"),checked:s.megamenu,onChange:()=>l({...s,megamenu:!s.megamenu})}))),(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content__modules"},(0,t.createElement)("h3",null,(0,n.__)("Header & Footer","thim-elementor-kit")),(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content__widgets"},(0,t.createElement)(i.ToggleControl,{label:(0,n.__)("Header Builder","thim-elementor-kit"),checked:s.header,onChange:()=>l({...s,header:!s.header})}),(0,t.createElement)(i.ToggleControl,{label:(0,n.__)("Footer Builder","thim-elementor-kit"),checked:s.footer,onChange:()=>l({...s,footer:!s.footer})}))))))}function o(e){let{advancedSettings:s,setAdvancedSettings:a}=e;return(0,t.createElement)("div",{className:"thim-ekit-settings__widgets"},(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__header"}),(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content"},(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content__modules"},(0,t.createElement)("div",{className:"thim-ekit-settings__widgets__content__widgets"},(0,t.createElement)("div",null,(0,t.createElement)("h3",null,(0,n.__)("Google Map API","thim-elementor-kit")),(0,t.createElement)(i.TextControl,{label:"",value:s.google_map_api_key,onChange:e=>a({...s,google_map_api_key:e})})),(0,t.createElement)("div",null,(0,t.createElement)("h3",null,(0,n.__)("Instagram Token","thim-elementor-kit")),(0,t.createElement)(i.TextControl,{label:"",value:s.instagram_token,onChange:e=>a({...s,instagram_token:e})})),(0,t.createElement)("div",null,(0,t.createElement)("h3",null,(0,n.__)("Twitter Data","thim-elementor-kit")),(0,t.createElement)(i.TextControl,{label:"",value:s.twitter_data,onChange:e=>a({...s,twitter_data:e})})),(0,t.createElement)("div",null,(0,t.createElement)("h3",null,(0,n.__)("Mailchimp User Data","thim-elementor-kit")),(0,t.createElement)(i.TextControl,{label:"",value:s.mailchimp,onChange:e=>a({...s,mailchimp:e})}))))))}wp.element.render((0,t.createElement)((function(){const[e,s]=(0,t.useState)([]),[l,_]=(0,t.useState)([]),[r,g]=(0,t.useState)([]),[h,u]=(0,t.useState)({}),[w,E]=(0,t.useState)({}),[k,v]=(0,t.useState)({widgets:!1,modules:!1}),[p,S]=(0,t.useState)(!1),[N,C]=(0,t.useState)("");return(0,t.createElement)("div",{className:"thim-ekit-settings"},(0,t.createElement)("h2",null,(0,n.__)("Thim Elementor Kit Settings","thim-elementor-kit")),(0,t.createElement)(i.TabPanel,{className:"thim-ekit-settings__tab-panel",activeClass:"active-tab",tabs:[{name:"widgets",title:(0,n.__)("Widgets","thim-elementor-kit"),className:"thim-ekit-settings__widgets"},{name:"modules",title:(0,n.__)("Modules","thim-elementor-kit"),className:"thim-ekit-settings__modules"},{name:"advanced",title:(0,n.__)("Settings","thim-elementor-kit"),className:"thim-ekit-settings__advanced"}]},(n=>(0,t.createElement)("div",{className:"thim-ekit-settings__tab-content"},"widgets"===n.name&&(0,t.createElement)(d,{widgets:e,setWidgets:s,widgetSettings:l,setWidgetSettings:_,widgetList:r,setWidgetList:g,loaded:k,setLoaded:v}),"modules"===n.name&&(0,t.createElement)(c,{moduleSettings:h,setModuleSettings:u,loaded:k,setLoaded:v}),"advanced"===n.name&&(0,t.createElement)(o,{advancedSettings:w,setAdvancedSettings:E})))),(0,t.createElement)("div",{className:"thim-ekit-settings__save"},(0,t.createElement)(i.Button,{isPrimary:!0,variant:"primary",icon:p?(0,t.createElement)(i.Spinner,null):m,text:(0,n.__)("Save Changes","thim-elementor-kit"),onClick:async function(){try{S(!0);const e=await a()({path:"thim-ekit/save-widget-settings",method:"POST",data:{widgets:l,modules:h}});if(!e.success)throw new Error(e.message||(0,n.__)("Cannot save settings","thim-elementor-kit"));S(!1),C(e.message||(0,n.__)("Settings saved","thim-elementor-kit"))}catch(e){S(!1),C(e.message)}}})),N&&!p&&(0,t.createElement)("div",{className:"thim-ekit-settings__toast"},(0,t.createElement)("span",null,N)))}),null),document.getElementById("thim-ekit-settings-app"))})();